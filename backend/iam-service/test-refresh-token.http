### Test Phase 3: Refresh Token Implementation

### 1. Login to get access token and refresh token
POST http://localhost:8081/api/auth/login
Content-Type: application/json

{
  "email": "admin@bookfair.com",
  "password": "admin123"
}

> {%
    client.global.set("access_token", response.body.message);
    client.global.set("refresh_token", response.body.refreshToken);
    client.log("Access Token: " + response.body.message);
    client.log("Refresh Token: " + response.body.refreshToken);
%}

###

### 2. Use the refresh token to get a new access token
POST http://localhost:8081/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refresh_token}}"
}

> {%
    client.global.set("new_access_token", response.body.message);
    client.log("New Access Token: " + response.body.message);
%}

###

### 3. Logout (revoke refresh token)
POST http://localhost:8081/api/auth/logout
Content-Type: application/json

{
  "refreshToken": "{{refresh_token}}"
}

###

### 4. Try to use revoked refresh token (should fail)
POST http://localhost:8081/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refresh_token}}"
}

###

### 5. Test with invalid refresh token
POST http://localhost:8081/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "invalid-token-12345"
}

###

### 6. Login again to verify new refresh token is generated
POST http://localhost:8081/api/auth/login
Content-Type: application/json

{
  "email": "admin@bookfair.com",
  "password": "admin123"
}

